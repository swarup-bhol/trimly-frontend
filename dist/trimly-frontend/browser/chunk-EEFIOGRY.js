import{a as I,b as W,c as A,k as B}from"./chunk-BSUZVFBV.js";import{$ as d,Aa as D,B as a,I as g,Ia as L,K as x,Ka as z,M as w,N as v,Pa as F,Qa as Y,R as c,S,T as E,U as R,V as i,W as t,X as T,Z as h,_ as u,ea as s,ga as C,ja as b,ka as P,la as y,na as M,oa as V,p as f,r as k,v as p,w as m}from"./chunk-EIAEMANE.js";var N=()=>[1,2,3,4];function U(n,l){if(n&1){let e=h();i(0,"div",5)(1,"div",7),s(2,"\u26A0\uFE0F"),t(),i(3,"div",8),s(4," Invalid or Expired Link "),t(),i(5,"div",9),s(6," This password reset link is invalid or has already been used. Please request a new one. "),t(),i(7,"button",10),u("click",function(){p(e);let r=d();return m(r.goToLogin())}),s(8," Back to Login "),t()()}}function j(n,l){if(n&1&&T(0,"div",29),n&2){let e=l.$implicit,o=d(3);v("background",e<=o.strength()?o.strengthColor():"var(--border2)")}}function q(n,l){if(n&1&&(i(0,"div",20)(1,"div",26),E(2,j,1,2,"div",27,S),t(),i(4,"div",28),s(5),t()()),n&2){let e=d(2);a(2),R(V(3,N)),a(2),v("color",e.strengthColor()),a(),C(" ",e.strengthLabel()," ")}}function G(n,l){n&1&&(i(0,"div",23),s(1," \u2715 Passwords don't match "),t())}function Z(n,l){if(n&1&&(i(0,"div",24),s(1),t()),n&2){let e=d(2);a(),C(" ",e.errMsg()," ")}}function O(n,l){n&1&&(i(0,"span"),s(1,"Resetting..."),t())}function H(n,l){n&1&&(i(0,"span"),s(1,"Reset Password \u{1F510}"),t())}function J(n,l){if(n&1){let e=h();i(0,"div",6)(1,"div",11)(2,"div",12),s(3,"\u{1F510}"),t(),i(4,"div",13),s(5," Reset Password "),t(),i(6,"div",14),s(7," Enter your new password below "),t()(),i(8,"div",15)(9,"label",16),s(10,"New Password"),t(),i(11,"div",17)(12,"input",18),y("ngModelChange",function(r){p(e);let _=d();return P(_.newPassword,r)||(_.newPassword=r),m(r)}),u("keyup.enter",function(){p(e);let r=d();return m(r.submit())}),t(),i(13,"button",19),u("click",function(){p(e);let r=d();return m(r.showPass.set(!r.showPass()))}),s(14),t()(),x(15,q,6,4,"div",20),t(),i(16,"div",21)(17,"label",16),s(18,"Confirm Password"),t(),i(19,"input",22),y("ngModelChange",function(r){p(e);let _=d();return P(_.confirmPassword,r)||(_.confirmPassword=r),m(r)}),u("keyup.enter",function(){p(e);let r=d();return m(r.submit())}),t(),x(20,G,2,0,"div",23),t(),x(21,Z,2,1,"div",24),i(22,"button",25),u("click",function(){p(e);let r=d();return m(r.submit())}),x(23,O,2,0,"span")(24,H,2,0),t()()}if(n&2){let e=d();a(12),w("type",e.showPass()?"text":"password"),b("ngModel",e.newPassword),a(2),C(" ",e.showPass()?"\u{1F648}":"\u{1F441}\uFE0F"," "),a(),c(15,e.newPassword.length>0?15:-1),a(4),w("type",e.showPass()?"text":"password"),b("ngModel",e.confirmPassword),a(),c(20,e.confirmPassword&&e.newPassword!==e.confirmPassword?20:-1),a(),c(21,e.errMsg()?21:-1),a(),w("disabled",e.loading()||!e.canSubmit()),a(),c(23,e.loading()?23:24)}}function K(n,l){if(n&1){let e=h();i(0,"div",5)(1,"div",7),s(2,"\u2705"),t(),i(3,"div",8),s(4," Password Reset! "),t(),i(5,"div",9),s(6," Your password has been updated successfully. You can now login with your new password. "),t(),i(7,"button",10),u("click",function(){p(e);let r=d();return m(r.goToLogin())}),s(8," Go to Login \u2192 "),t()()}}var se=(()=>{class n{constructor(){this.route=f(L),this.router=f(z),this.auth=f(F),this.toast=f(Y),this.step=g("form"),this.loading=g(!1),this.showPass=g(!1),this.errMsg=g(""),this.token="",this.newPassword="",this.confirmPassword=""}ngOnInit(){this.token=this.route.snapshot.queryParamMap.get("token")||"",this.token||this.step.set("invalid")}canSubmit(){return this.newPassword.length>=8&&this.newPassword===this.confirmPassword}strength(){let e=this.newPassword,o=0;return e.length>=8&&o++,/[A-Z]/.test(e)&&o++,/[0-9]/.test(e)&&o++,/[^A-Za-z0-9]/.test(e)&&o++,o}strengthColor(){return["","var(--crimson)","var(--amber)","#f59e0b","var(--emerald)"][this.strength()]}strengthLabel(){return["","Weak","Fair","Good","Strong"][this.strength()]}submit(){this.canSubmit()&&(this.loading.set(!0),this.errMsg.set(""),this.auth.resetPassword(this.token,this.newPassword).subscribe({next:()=>{this.loading.set(!1),this.step.set("success")},error:e=>{this.loading.set(!1);let o=e.error?.message||"Invalid or expired reset link";o.toLowerCase().includes("invalid")||o.toLowerCase().includes("expired")?this.step.set("invalid"):this.errMsg.set(o)}}))}goToLogin(){this.router.navigate(["/"])}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=k({type:n,selectors:[["app-reset-password"]],standalone:!0,features:[M],decls:10,vars:3,consts:[[2,"min-height","100vh","background","var(--bg)","display","flex","align-items","center","justify-content","center","padding","24px"],[2,"position","fixed","top","0","left","0","right","0","padding","20px 24px","display","flex","align-items","center"],[2,"font-family","'Unbounded',sans-serif","font-size","20px","font-weight","900","color","#fff"],[2,"color","var(--amber)"],[2,"width","100%","max-width","420px"],[1,"card","anim-fade-up",2,"text-align","center","padding","40px 32px"],[1,"card","anim-fade-up",2,"padding","36px 32px"],[2,"font-size","56px","margin-bottom","16px"],[2,"font-family","'Unbounded',sans-serif","font-size","18px","font-weight","700","margin-bottom","8px"],[2,"color","var(--text2)","font-size","13px","margin-bottom","24px","line-height","1.6"],[1,"btn","btn-amber","btn-block",3,"click"],[2,"text-align","center","margin-bottom","28px"],[2,"font-size","48px","margin-bottom","12px"],[2,"font-family","'Unbounded',sans-serif","font-size","20px","font-weight","700","margin-bottom","6px"],[2,"color","var(--text2)","font-size","13px"],[1,"fg"],[1,"fl"],[2,"position","relative"],["placeholder","Min 8 characters",1,"fi",3,"ngModelChange","keyup.enter","type","ngModel"],[2,"position","absolute","right","12px","top","50%","transform","translateY(-50%)","background","none","border","none","cursor","pointer","color","var(--text3)","font-size","16px",3,"click"],[2,"margin-top","8px"],[1,"fg",2,"margin-top","14px"],["placeholder","Repeat new password",1,"fi",3,"ngModelChange","keyup.enter","type","ngModel"],[2,"font-size","11px","color","var(--crimson)","margin-top","4px"],[2,"background","var(--crimson-dim)","border","1px solid rgba(239,68,68,.2)","border-radius","10px","padding","10px 14px","font-size","12px","color","var(--crimson)","margin-top","12px"],[1,"btn","btn-amber","btn-block","btn-lg",2,"margin-top","20px",3,"click","disabled"],[2,"display","flex","gap","4px","margin-bottom","4px"],[2,"height","3px","flex","1","border-radius","2px","transition","background .2s",3,"background"],[2,"font-size","11px"],[2,"height","3px","flex","1","border-radius","2px","transition","background .2s"]],template:function(o,r){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),s(3," TRIM"),i(4,"span",3),s(5,"LY"),t()()(),i(6,"div",4),x(7,U,9,0,"div",5)(8,J,25,10,"div",6)(9,K,9,0,"div",5),t()()),o&2&&(a(7),c(7,r.step()==="invalid"?7:-1),a(),c(8,r.step()==="form"?8:-1),a(),c(9,r.step()==="success"?9:-1))},dependencies:[D,B,I,W,A],encapsulation:2})}}return n})();export{se as ResetPasswordComponent};
