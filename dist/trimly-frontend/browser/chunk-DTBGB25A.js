import{a as Z}from"./chunk-SKHF3YWI.js";import{a as ee,b as te,c as ie,d as ne,e as oe,f as ae,g as re,h as le}from"./chunk-JAUZOHJ2.js";import{$ as n,A as r,Ga as q,H as E,Ha as Q,Ia as X,J as u,K as b,L as P,M as B,N as W,P as g,Q as R,R as w,S as k,T as i,U as t,V as T,W as F,X as v,Y as x,Z as c,_ as V,aa as _,ba as h,ca as H,da as L,ea as C,fa as S,ga as f,ia as z,ja as y,ka as K,la as A,ma as j,na as M,o as N,q as U,ra as O,u as d,v as p,va as Y,wa as J,xa as $}from"./chunk-EMWRS4DM.js";var I=(o,m)=>m.id,se=(o,m)=>m[0],ce=()=>["all","All"],me=()=>["PENDING","Pending"],de=()=>["CONFIRMED","Confirmed"],pe=()=>["COMPLETED","Completed"],_e=()=>["REJECTED","Rejected"],ue=()=>["CANCELLED","Cancelled"],xe=(o,m,e,l,a,s)=>[o,m,e,l,a,s],ge=()=>[],be=()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ve=()=>[1,2,3,4,5];function he(o,m){o&1&&T(0,"div",12)}function Ce(o,m){if(o&1&&(i(0,"span",27),n(1),t()),o&2){let e=c().$implicit;r(),_(e.badge)}}function Se(o,m){if(o&1){let e=v();i(0,"button",26),x("click",function(){let a=d(e).$implicit,s=c();return p(s.tab.set(a.id))}),i(1,"span"),n(2),t(),n(3),u(4,Ce,2,1,"span",27),t()}if(o&2){let e=m.$implicit,l=c();B("on",l.tab()===e.id),r(2),_(e.icon),r(),h(" ",e.label," "),r(),g(4,e.badge&&e.badge>0?4:-1)}}function fe(o,m){if(o&1){let e=v();i(0,"div",28),n(1,"Shop Status"),t(),i(2,"div",29)(3,"div",30)(4,"span"),n(5),t()(),i(6,"button",31),x("click",function(){d(e);let a=c();return p(a.toggleOpen())}),n(7),t()()}if(o&2){let e=c();r(4),W(e.shop().isOpen?"open-badge ob-open":"open-badge ob-closed"),r(),h(" ",e.shop().isOpen?"\u25CF Open":"\u25CF Closed"," "),r(),B("btn-crimson",e.shop().isOpen)("btn-emerald",!e.shop().isOpen),r(),h(" ",e.shop().isOpen?"\u{1F512} Close Shop":"\u{1F513} Open Shop"," ")}}function Ee(o,m){o&1&&(i(0,"div",23),T(1,"div",32),i(2,"span"),n(3,"Loading dashboard..."),t()())}function we(o,m){if(o&1){let e=v();i(0,"div",33)(1,"div",34)(2,"div",35),n(3,"\u23F3"),t(),i(4,"div",36),n(5,"PENDING APPROVAL"),t(),i(6,"div",37),n(7,"Your shop registration is under review. Our admin team will approve it shortly. You'll see a notification once approved."),t(),i(8,"div",38)(9,"div",39)(10,"span",40),n(11,"Shop Name"),t(),i(12,"span"),n(13),t()(),i(14,"div",39)(15,"span",40),n(16,"Location"),t(),i(17,"span"),n(18),t()(),i(19,"div",39)(20,"span",40),n(21,"Status"),t(),i(22,"span",41),n(23,"\u23F3 Pending"),t()()(),i(24,"button",42),x("click",function(){d(e);let a=c();return p(a.logout())}),n(25,"\u2190 Logout"),t()()()}if(o&2){let e=c();r(13),_(e.shop().shopName),r(5),_(e.shop().location)}}function ke(o,m){o&1&&F(0)}function ye(o,m){if(o&1&&u(0,ke,1,0,"ng-container",43),o&2){c(2);let e=V(33);b("ngTemplateOutlet",e)}}function Be(o,m){o&1&&F(0)}function Te(o,m){if(o&1&&u(0,Be,1,0,"ng-container",43),o&2){c(2);let e=V(35);b("ngTemplateOutlet",e)}}function Fe(o,m){o&1&&F(0)}function Ve(o,m){if(o&1&&u(0,Fe,1,0,"ng-container",43),o&2){c(2);let e=V(37);b("ngTemplateOutlet",e)}}function Me(o,m){o&1&&F(0)}function De(o,m){if(o&1&&u(0,Me,1,0,"ng-container",43),o&2){c(2);let e=V(39);b("ngTemplateOutlet",e)}}function Ie(o,m){o&1&&F(0)}function Ne(o,m){if(o&1&&u(0,Ie,1,0,"ng-container",43),o&2){c(2);let e=V(41);b("ngTemplateOutlet",e)}}function Oe(o,m){o&1&&F(0)}function Pe(o,m){if(o&1&&u(0,Oe,1,0,"ng-container",43),o&2){c(2);let e=V(43);b("ngTemplateOutlet",e)}}function We(o,m){o&1&&F(0)}function Le(o,m){if(o&1&&u(0,We,1,0,"ng-container",43),o&2){c(2);let e=V(45);b("ngTemplateOutlet",e)}}function Re(o,m){if(o&1&&u(0,ye,1,1)(1,Te,1,1)(2,Ve,1,1)(3,De,1,1)(4,Ne,1,1)(5,Pe,1,1)(6,Le,1,1),o&2){let e,l=c();g(0,(e=l.tab())==="bookings"?0:e==="notifications"?1:e==="services"?2:e==="slots"?3:e==="myshop"?4:e==="earnings"?5:e==="sharelink"?6:-1)}}function Ae(o,m){if(o&1&&(i(0,"span",46),n(1),t()),o&2){let e=c().$implicit;r(),_(e.badge)}}function je(o,m){if(o&1){let e=v();i(0,"button",44),x("click",function(){let a=d(e).$implicit,s=c();return p(s.tab.set(a.id))}),i(1,"span",45),n(2),u(3,Ae,2,1,"span",46),t(),n(4),t()}if(o&2){let e=m.$implicit,l=c();B("on",l.tab()===e.id),r(2),h("",e.icon," "),r(),g(3,e.badge&&e.badge>0?3:-1),r(),h(" ",e.label," ")}}function Ge(o,m){if(o&1){let e=v();i(0,"button",58),x("click",function(){let a=d(e).$implicit,s=c(2);return p(s.bkFilter.set(a[0]))}),n(1),t()}if(o&2){let e=m.$implicit,l=c(2);B("btn-amber",l.bkFilter()===e[0])("btn-outline",l.bkFilter()!==e[0]),r(),_(e[1])}}function Ue(o,m){o&1&&(i(0,"div",56)(1,"div",59),n(2,"\u{1F4CB}"),t(),i(3,"div",60),n(4,"No bookings yet. Share your shop link to start getting customers!"),t()())}function He(o,m){if(o&1){let e=v();i(0,"button",71),x("click",function(){d(e);let a=c().$implicit,s=c(2);return p(s.updateStatus(a.id,"CONFIRMED"))}),n(1,"\u2713 Accept"),t(),i(2,"button",72),x("click",function(){d(e);let a=c().$implicit,s=c(2);return p(s.updateStatus(a.id,"REJECTED"))}),n(3,"\u2715 Reject"),t()}}function ze(o,m){if(o&1){let e=v();i(0,"button",73),x("click",function(){d(e);let a=c().$implicit,s=c(2);return p(s.updateStatus(a.id,"COMPLETED"))}),n(1,"\u{1F3C1} Mark Done"),t(),i(2,"button",72),x("click",function(){d(e);let a=c().$implicit,s=c(2);return p(s.updateStatus(a.id,"CANCELLED"))}),n(3,"Cancel"),t()}}function Ke(o,m){if(o&1&&(i(0,"div",57)(1,"div",61),n(2),t(),i(3,"div",62)(4,"div",63),n(5),t(),i(6,"div",64),n(7),t(),i(8,"div",65)(9,"span",66),n(10),t(),i(11,"span",67),n(12),t(),i(13,"span",68),n(14),t()(),i(15,"div",69),n(16),t(),i(17,"div",70),u(18,He,4,0)(19,ze,4,0),t()()()),o&2){let e=m.$implicit,l=c(2);r(2),_(e.customerName.charAt(0).toUpperCase()),r(3),_(e.customerName),r(2),L("",e.customerPhone," \xB7 ",e.bookingDate," \xB7 ",e.slot,""),r(2),W(l.statusClass(e.status)),r(),_(l.statusLabel(e.status)),r(2),_(e.servicesLabel),r(2),h("\u23F1 ",e.duration,"min"),r(2),h("\u20B9",e.amount,""),r(2),g(18,e.status==="PENDING"?18:-1),r(),g(19,e.status==="CONFIRMED"?19:-1)}}function Ye(o,m){if(o&1){let e=v();i(0,"div",33)(1,"div",47)(2,"div",48),n(3,"Dashboard \xB7 "),i(4,"span",49),n(5,"Bookings"),t()(),i(6,"div",50)(7,"div")(8,"div",51),n(9,"BOOKINGS"),t(),i(10,"div",52),n(11,"Manage your appointments"),t()(),i(12,"button",53),x("click",function(){d(e);let a=c();return p(a.loadBookings())}),n(13,"\u21BB Refresh"),t()()(),i(14,"div",54),w(15,Ge,2,5,"button",55,se),t(),u(17,Ue,5,0,"div",56),w(18,Ke,20,13,"div",57,I),t()}if(o&2){let e=c();r(15),k(K(7,xe,y(1,ce),y(2,me),y(3,de),y(4,pe),y(5,_e),y(6,ue))),r(2),g(17,e.filteredBookings().length===0?17:-1),r(),k(e.filteredBookings())}}function Je(o,m){if(o&1){let e=v();i(0,"button",53),x("click",function(){d(e);let a=c(2);return p(a.markAllRead())}),n(1," Mark all read "),t()}}function $e(o,m){o&1&&(i(0,"div",56)(1,"div",59),n(2,"\u{1F514}"),t(),i(3,"div",60),n(4,"No notifications yet"),t()())}function qe(o,m){o&1&&T(0,"span",81)}function Qe(o,m){if(o&1){let e=v();i(0,"div",76),x("click",function(){let a=d(e).$implicit,s=c(2);return p(s.markRead(a.id))}),i(1,"div",77),n(2),t(),i(3,"div",78)(4,"div",79)(5,"div",80),n(6),t(),u(7,qe,1,0,"span",81),t(),i(8,"div",82),n(9),t(),i(10,"div",83),n(11),t()()()}if(o&2){let e=m.$implicit,l=c(2);P("background",e.isRead?"var(--card)":"rgba(245,166,35,0.04)")("border","1px solid "+(e.isRead?"var(--border)":"rgba(245,166,35,0.2)")),r(2),h(" ",l.notifIcon(e.type)," "),r(3),P("color",e.isRead?"var(--text)":"var(--amber)"),r(),_(e.title),r(),g(7,e.isRead?-1:7),r(2),_(e.body),r(2),_(l.timeAgo(e.createdAt))}}function Xe(o,m){if(o&1&&(i(0,"div",33)(1,"div",47)(2,"div",50)(3,"div")(4,"div",51),n(5,"NOTIFICATIONS"),t(),i(6,"div",52),n(7,"Your booking updates"),t()(),u(8,Je,2,0,"button",74),t()(),u(9,$e,5,0,"div",56),w(10,Qe,12,11,"div",75,I),t()),o&2){let e=c();r(8),g(8,e.hasUnreadNotifications()?8:-1),r(),g(9,e.notifications().length===0?9:-1),r(),k(e.notifications())}}function Ze(o,m){if(o&1&&(i(0,"div",107),n(1),t()),o&2){let e=c(3);r(),_(e.svcErr())}}function et(o,m){if(o&1){let e=v();i(0,"div",84)(1,"div",86)(2,"div",87),n(3),t(),i(4,"button",17),x("click",function(){d(e);let a=c(2);return p(a.cancelService())}),n(5,"\u2715"),t()(),i(6,"div",88)(7,"div",89)(8,"label",90),n(9,"Service Name *"),t(),i(10,"input",91),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.svcForm.name,a)||(s.svcForm.name=a),p(a)}),t()(),i(11,"div",89)(12,"label",90),n(13,"Category"),t(),i(14,"select",92),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.svcForm.category,a)||(s.svcForm.category=a),p(a)}),i(15,"option",93),n(16,"Hair"),t(),i(17,"option",94),n(18,"Beard"),t(),i(19,"option",95),n(20,"Facial"),t(),i(21,"option",96),n(22,"Kids"),t(),i(23,"option",97),n(24,"Combo"),t(),i(25,"option",98),n(26,"Spa"),t(),i(27,"option",99),n(28,"Color"),t()()(),i(29,"div",89)(30,"label",90),n(31,"Duration (mins) *"),t(),i(32,"input",100),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.svcForm.duration,a)||(s.svcForm.duration=a),p(a)}),t()(),i(33,"div",89)(34,"label",90),n(35,"Price (\u20B9) *"),t(),i(36,"input",101),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.svcForm.price,a)||(s.svcForm.price=a),p(a)}),t()(),i(37,"div",89)(38,"label",90),n(39,"Description"),t(),i(40,"input",102),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.svcForm.description,a)||(s.svcForm.description=a),p(a)}),t()(),i(41,"div",89)(42,"label",90),n(43,"Icon (emoji)"),t(),i(44,"input",103),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.svcForm.icon,a)||(s.svcForm.icon=a),p(a)}),t()()(),i(45,"div",104)(46,"button",105),x("click",function(){d(e);let a=c(2);return p(a.saveService())}),n(47),t(),i(48,"button",106),x("click",function(){d(e);let a=c(2);return p(a.cancelService())}),n(49,"Cancel"),t()(),u(50,Ze,2,1,"div",107),t()}if(o&2){let e=c(2);r(3),_(e.editService?"Edit Service":"Add New Service"),r(7),C("ngModel",e.svcForm.name),r(4),C("ngModel",e.svcForm.category),r(18),C("ngModel",e.svcForm.duration),r(4),C("ngModel",e.svcForm.price),r(4),C("ngModel",e.svcForm.description),r(4),C("ngModel",e.svcForm.icon),r(2),b("disabled",e.savingService()),r(),_(e.savingService()?"Saving...":e.editService?"Update":"Add Service"),r(3),g(50,e.svcErr()?50:-1)}}function tt(o,m){o&1&&(i(0,"div",56)(1,"div",59),n(2,"\u2702\uFE0F"),t(),i(3,"div",60),n(4,"No services yet. Add your first service to start accepting bookings!"),t()())}function it(o,m){if(o&1){let e=v();i(0,"div",108)(1,"div",109),n(2),t(),i(3,"div",110)(4,"div",111),n(5),t(),i(6,"div",112),n(7),t()(),i(8,"div",113),n(9),t(),i(10,"div",114)(11,"button",115),x("click",function(){let a=d(e).$implicit,s=c(2);return p(s.startEditService(a))}),n(12,"Edit"),t(),i(13,"button",58),x("click",function(){let a=d(e).$implicit,s=c(2);return p(s.toggleService(a))}),n(14),t(),i(15,"button",116),x("click",function(){let a=d(e).$implicit,s=c(2);return p(s.deleteService(a.id))}),n(16,"\u2715"),t()()()}if(o&2){let e=m.$implicit;B("disabled",!e.enabled),r(2),_(e.icon||"\u2702\uFE0F"),r(3),_(e.name),r(2),L("",e.category," \xB7 \u23F1 ",e.duration," min",e.description?" \xB7 "+e.description:"",""),r(2),h("\u20B9",e.price,""),r(4),B("btn-amber",!e.enabled)("btn-crimson",e.enabled),r(),_(e.enabled?"Disable":"Enable")}}function nt(o,m){if(o&1){let e=v();i(0,"div",33)(1,"div",47)(2,"div",50)(3,"div")(4,"div",51),n(5,"SERVICES"),t(),i(6,"div",52),n(7,"Manage your offered services"),t()(),i(8,"button",73),x("click",function(){d(e);let a=c();return p(a.showAddService.set(!0))}),n(9,"+ Add Service"),t()()(),u(10,et,51,10,"div",84)(11,tt,5,0,"div",56),w(12,it,17,13,"div",85,I),t()}if(o&2){let e,l,a=c();r(10),g(10,a.showAddService()?10:-1),r(),g(11,((e=a.shop())==null||e.services==null?null:e.services.length)===0?11:-1),r(),k(((l=a.shop())==null?null:l.services)||y(2,ge))}}function ot(o,m){if(o&1){let e=v();i(0,"button",58),x("click",function(){let a=d(e).$implicit,s=c(3);return p(s.toggleWorkDay(a))}),n(1),t()}if(o&2){let e=m.$implicit,l=c(3);B("btn-amber",l.isWorkDay(e))("btn-outline",!l.isWorkDay(e)),r(),_(e)}}function at(o,m){if(o&1){let e=v();i(0,"div",117)(1,"div",86)(2,"div",87),n(3,"Business Hours"),t()(),i(4,"div",88)(5,"div",89)(6,"label",90),n(7,"Opening Time"),t(),i(8,"input",118),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.shopForm.openTime,a)||(s.shopForm.openTime=a),p(a)}),t()(),i(9,"div",89)(10,"label",90),n(11,"Closing Time"),t(),i(12,"input",118),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.shopForm.closeTime,a)||(s.shopForm.closeTime=a),p(a)}),t()(),i(13,"div",89)(14,"label",90),n(15,"Slot Duration (mins)"),t(),i(16,"select",92),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.shopForm.slotMin,a)||(s.shopForm.slotMin=a),p(a)}),i(17,"option",119),n(18,"15 min"),t(),i(19,"option",119),n(20,"30 min"),t(),i(21,"option",119),n(22,"45 min"),t(),i(23,"option",119),n(24,"60 min"),t()()(),i(25,"div",89)(26,"label",90),n(27,"Seats"),t(),i(28,"select",92),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.shopForm.seats,a)||(s.shopForm.seats=a),p(a)}),i(29,"option",119),n(30,"1 seat"),t(),i(31,"option",119),n(32,"2 seats"),t(),i(33,"option",119),n(34,"3 seats"),t(),i(35,"option",119),n(36,"4 seats"),t()()()(),i(37,"div",89)(38,"label",90),n(39,"Work Days"),t(),i(40,"div",120),w(41,ot,2,5,"button",55,R),t()(),i(43,"button",105),x("click",function(){d(e);let a=c(2);return p(a.saveHours())}),n(44),t()()}if(o&2){let e=c(2);r(8),C("ngModel",e.shopForm.openTime),r(4),C("ngModel",e.shopForm.closeTime),r(4),C("ngModel",e.shopForm.slotMin),r(),b("ngValue",15),r(2),b("ngValue",30),r(2),b("ngValue",45),r(2),b("ngValue",60),r(5),C("ngModel",e.shopForm.seats),r(),b("ngValue",1),r(2),b("ngValue",2),r(2),b("ngValue",3),r(2),b("ngValue",4),r(6),k(y(14,be)),r(2),b("disabled",e.savingShop()),r(),_(e.savingShop()?"Saving...":"Save Hours")}}function rt(o,m){if(o&1&&(i(0,"div",33)(1,"div",47)(2,"div",51),n(3,"SLOTS & HOURS"),t(),i(4,"div",52),n(5,"Configure your working hours"),t()(),u(6,at,45,15,"div",117),t()),o&2){let e=c();r(6),g(6,e.shop()?6:-1)}}function lt(o,m){if(o&1){let e=v();i(0,"div",121)(1,"div",86)(2,"div",87),n(3,"Shop Profile"),t()(),i(4,"div",88)(5,"div",89)(6,"label",90),n(7,"Shop Name"),t(),i(8,"input",92),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.shopForm.shopName,a)||(s.shopForm.shopName=a),p(a)}),t()(),i(9,"div",89)(10,"label",90),n(11,"Emoji"),t(),i(12,"input",122),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.shopForm.emoji,a)||(s.shopForm.emoji=a),p(a)}),t()(),i(13,"div",89)(14,"label",90),n(15,"Location"),t(),i(16,"input",92),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.shopForm.location,a)||(s.shopForm.location=a),p(a)}),t()(),i(17,"div",89)(18,"label",90),n(19,"Phone"),t(),i(20,"input",92),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.shopForm.phone,a)||(s.shopForm.phone=a),p(a)}),t()()(),i(21,"div",89)(22,"label",90),n(23,"Bio"),t(),i(24,"textarea",123),f("ngModelChange",function(a){d(e);let s=c(2);return S(s.shopForm.bio,a)||(s.shopForm.bio=a),p(a)}),t()(),i(25,"button",105),x("click",function(){d(e);let a=c(2);return p(a.saveShop())}),n(26),t()()}if(o&2){let e=c(2);r(8),C("ngModel",e.shopForm.shopName),r(4),C("ngModel",e.shopForm.emoji),r(4),C("ngModel",e.shopForm.location),r(4),C("ngModel",e.shopForm.phone),r(4),C("ngModel",e.shopForm.bio),r(),b("disabled",e.savingShop()),r(),_(e.savingShop()?"Saving...":"Save Changes")}}function st(o,m){if(o&1&&(i(0,"div",33)(1,"div",47)(2,"div",51),n(3,"MY SHOP"),t(),i(4,"div",52),n(5,"Edit your shop profile"),t()(),u(6,lt,27,7,"div",121),t()),o&2){let e=c();r(6),g(6,e.shop()?6:-1)}}function ct(o,m){if(o&1&&(i(0,"span"),n(1,"\u2605"),t()),o&2){let e=m.$implicit,l=c(2).$implicit;P("color",e<=l.rating?"var(--amber)":"var(--border2)")}}function mt(o,m){o&1&&(i(0,"div",139),w(1,ct,2,2,"span",141,R),t()),o&2&&(r(),k(y(0,ve)))}function dt(o,m){if(o&1&&(i(0,"div",136)(1,"div",137),n(2),t(),i(3,"div",78)(4,"div",80),n(5),t(),i(6,"div",138),n(7),t(),u(8,mt,3,1,"div",139),t(),i(9,"div",140),n(10),t()()),o&2){let e=m.$implicit;r(2),_(e.shopEmoji||"\u2702\uFE0F"),r(3),_(e.customerName),r(2),L("",e.servicesLabel," \xB7 ",e.slot," \xB7 ",e.bookingDate,""),r(),g(8,e.rating?8:-1),r(2),h("\u20B9",e.amount,"")}}function pt(o,m){o&1&&(i(0,"div",56)(1,"div",59),n(2,"\u{1F4B0}"),t(),i(3,"div",60),n(4,"No completed bookings yet"),t()())}function _t(o,m){if(o&1&&(i(0,"div",124)(1,"div",125),T(2,"div",126),i(3,"div",127),n(4,"\u{1F4B0}"),t(),i(5,"div",128),n(6),t(),i(7,"div",129),n(8,"This Month"),t()(),i(9,"div",125),T(10,"div",130),i(11,"div",127),n(12,"\u{1F4CB}"),t(),i(13,"div",131),n(14),t(),i(15,"div",129),n(16,"Completed"),t()(),i(17,"div",125),T(18,"div",132),i(19,"div",127),n(20,"\u2B50"),t(),i(21,"div",133),n(22),A(23,"number"),t(),i(24,"div",129),n(25),t()(),i(26,"div",125),T(27,"div",134),i(28,"div",127),n(29,"\u{1F4B3}"),t(),i(30,"div",135),n(31),A(32,"number"),t(),i(33,"div",129),n(34),t()()(),i(35,"div",121)(36,"div",86)(37,"div",87),n(38,"Recent Completed"),t()(),w(39,dt,11,7,"div",136,I),u(41,pt,5,0,"div",56),t()),o&2){let e=c(2);r(6),h("\u20B9",e.shop().monthlyRev.toLocaleString("en-IN"),""),r(8),_(e.completedCount()),r(8),_(e.shop().rating?j(23,7,e.shop().rating,"1.1-1"):"\u2014"),r(3),h("Rating (",e.shop().reviews," reviews)"),r(6),h("\u20B9",j(32,10,e.shop().monthlyRev*e.shop().commissionPct/100,"1.0-0"),""),r(3),h("Commission Paid (",e.shop().commissionPct,"%)"),r(5),k(e.completedBookings().slice(0,10)),r(2),g(41,e.completedBookings().length===0?41:-1)}}function ut(o,m){if(o&1&&(i(0,"div",33)(1,"div",47)(2,"div",51),n(3,"EARNINGS"),t(),i(4,"div",52),n(5,"Your revenue overview"),t()(),u(6,_t,42,13),t()),o&2){let e=c();r(6),g(6,e.shop()?6:-1)}}function xt(o,m){if(o&1){let e=v();i(0,"div",142)(1,"div",86)(2,"div",87),n(3,"Your Booking URL"),t()(),i(4,"div",143),n(5),t(),i(6,"button",144),x("click",function(){d(e);let a=c(2);return p(a.copyLink())}),n(7,"\u{1F4CB} Copy Link"),t(),i(8,"div",145)(9,"div",146),n(10,"\u{1F4F1} Share with customers"),t(),i(11,"div",147),n(12,"Share this link via WhatsApp, Instagram bio, or print on your visiting card. Customers can browse your services and book a slot instantly \u2014 no app download required."),t()(),i(13,"div",148)(14,"div",39)(15,"span",40),n(16,"Shop"),t(),i(17,"span"),n(18),t()(),i(19,"div",39)(20,"span",40),n(21,"Services"),t(),i(22,"span"),n(23),t()(),i(24,"div",39)(25,"span",40),n(26,"Rating"),t(),i(27,"span"),n(28),t()(),i(29,"div",39)(30,"span",40),n(31,"Status"),t(),i(32,"span"),n(33),t()()()()}if(o&2){let e,l=c(2);r(5),h(" ",l.bookingUrl()," "),r(13),H("",l.shop().emoji||"\u2702\uFE0F"," ",l.shop().shopName,""),r(5),h("",((e=l.shop().services)==null?null:e.length)||0," available"),r(5),_(l.shop().rating?l.shop().rating+"\u2605":"No reviews yet"),r(4),W(l.shop().isOpen?"open-badge ob-open":"open-badge ob-closed"),r(),_(l.shop().isOpen?"\u25CF Open":"\u25CF Closed")}}function gt(o,m){if(o&1&&(i(0,"div",33)(1,"div",47)(2,"div",51),n(3,"SHARE LINK"),t(),i(4,"div",52),n(5,"Share your booking page"),t()(),u(6,xt,34,8,"div",142),t()),o&2){let e=c();r(6),g(6,e.shop()?6:-1)}}var Tt=(()=>{class o{constructor(){this.api=N(Q),this.authSvc=N(X),this.toast=N(q),this.notifSvc=N(Z),this.tab=E("bookings"),this.loading=E(!0),this.shop=E(null),this.bookings=E([]),this.notifications=E([]),this.bkFilter=E("all"),this.showAddService=E(!1),this.savingService=E(!1),this.savingShop=E(!1),this.svcErr=E(null),this.editService=null,this.svcForm={name:"",description:"",category:"hair",icon:"\u2702\uFE0F",duration:30,price:0,enabled:!0},this.shopForm={},this.session=this.authSvc.session,this.unreadCount=this.notifSvc.unreadCount,this.initials=O(()=>this.session()?.name?.charAt(0)?.toUpperCase()??"B"),this.hasUnreadNotifications=O(()=>this.notifications().some(e=>!e.isRead)),this.completedBookings=O(()=>this.bookings().filter(e=>e.status==="COMPLETED")),this.completedCount=O(()=>this.completedBookings().length)}get navItems(){let e=this.bookings().filter(a=>a.status==="PENDING").length,l=this.notifications().filter(a=>!a.isRead).length;return[{id:"bookings",icon:"\u{1F4CB}",label:"Bookings",badge:e},{id:"notifications",icon:"\u{1F514}",label:"Notifications",badge:l},{id:"services",icon:"\u2702\uFE0F",label:"Services",badge:0},{id:"slots",icon:"\u{1F550}",label:"Slots & Hours",badge:0},{id:"myshop",icon:"\u{1F3EA}",label:"My Shop",badge:0},{id:"earnings",icon:"\u{1F4B3}",label:"Earnings",badge:0},{id:"sharelink",icon:"\u{1F517}",label:"Share Link",badge:0}]}get mobileNavItems(){return this.navItems.slice(0,5)}filteredBookings(){let e=this.bkFilter();return e==="all"?this.bookings():this.bookings().filter(l=>l.status===e)}bookingUrl(){return`${window.location.origin}/customer?shop=${this.shop()?.id}`}ngOnInit(){this.loadShop(),this.loadNotifications()}loadShop(){this.loading.set(!0),this.api.get("/shops/my").subscribe({next:e=>{this.shop.set(e),this.syncShopForm(e),this.loading.set(!1),this.loadBookings()},error:()=>{this.loading.set(!1)}})}loadBookings(){this.api.get("/bookings/shop").subscribe({next:e=>this.bookings.set(e)})}loadNotifications(){this.api.get("/notifications").subscribe({next:e=>this.notifications.set(e)})}syncShopForm(e){this.shopForm={shopName:e.shopName,emoji:e.emoji||"\u2702\uFE0F",location:e.location,phone:e.phone||"",bio:e.bio||"",openTime:e.openTime,closeTime:e.closeTime,slotMin:e.slotMin,seats:e.seats,workDays:e.workDays||""}}toggleOpen(){let e=this.shop();e&&this.api.put("/shops/my",{isOpen:!e.isOpen}).subscribe({next:l=>{this.shop.set(l),this.toast.show(l.isOpen?"Shop Opened \u{1F513}":"Shop Closed \u{1F512}","","ok")}})}updateStatus(e,l){this.api.patch(`/bookings/shop/${e}/status`,{status:l}).subscribe({next:a=>{this.bookings.update(D=>D.map(G=>G.id===e?a:G));let s={CONFIRMED:"Booking confirmed \u2713",REJECTED:"Booking rejected",COMPLETED:"Marked as complete \u{1F3C1}",CANCELLED:"Booking cancelled"};this.toast.show(s[l]||"Updated","","ok"),this.notifSvc.refreshCount()},error:()=>this.toast.show("Error","Failed to update booking","err")})}saveService(){if(!this.svcForm.name.trim()){this.svcErr.set("Service name is required");return}if(!this.svcForm.price||this.svcForm.duration<=0){this.svcErr.set("Price and duration are required");return}this.savingService.set(!0),this.svcErr.set(null),(this.editService?this.api.put(`/shops/my/services/${this.editService.id}`,this.svcForm):this.api.post("/shops/my/services",this.svcForm)).subscribe({next:()=>{this.toast.show(this.editService?"Service updated":"Service added","","ok"),this.savingService.set(!1),this.cancelService(),this.loadShop()},error:l=>{this.svcErr.set(l.error?.message||"Failed"),this.savingService.set(!1)}})}startEditService(e){this.editService=e,this.svcForm={name:e.name,description:e.description||"",category:e.category||"hair",icon:e.icon||"\u2702\uFE0F",duration:e.duration,price:e.price,enabled:e.enabled},this.showAddService.set(!0)}cancelService(){this.showAddService.set(!1),this.editService=null,this.svcErr.set(null),this.svcForm={name:"",description:"",category:"hair",icon:"\u2702\uFE0F",duration:30,price:0,enabled:!0}}toggleService(e){this.api.put(`/shops/my/services/${e.id}`,{enabled:!e.enabled}).subscribe({next:()=>{this.toast.show(e.enabled?"Service disabled":"Service enabled","","ok"),this.loadShop()}})}deleteService(e){confirm("Delete this service?")&&this.api.delete(`/shops/my/services/${e}`).subscribe({next:()=>{this.toast.show("Service deleted","","warn"),this.loadShop()},error:()=>this.toast.show("Error","Failed to delete","err")})}saveShop(){this.savingShop.set(!0),this.api.put("/shops/my",{shopName:this.shopForm.shopName,location:this.shopForm.location,phone:this.shopForm.phone,bio:this.shopForm.bio,emoji:this.shopForm.emoji}).subscribe({next:e=>{this.shop.set(e),this.savingShop.set(!1),this.toast.show("Shop updated \u2713","","ok")},error:()=>{this.savingShop.set(!1),this.toast.show("Error","Failed to save","err")}})}saveHours(){this.savingShop.set(!0),this.api.put("/shops/my",{openTime:this.shopForm.openTime,closeTime:this.shopForm.closeTime,slotMin:this.shopForm.slotMin,seats:this.shopForm.seats,workDays:this.shopForm.workDays}).subscribe({next:e=>{this.shop.set(e),this.savingShop.set(!1),this.toast.show("Hours updated \u2713","","ok")},error:()=>{this.savingShop.set(!1),this.toast.show("Error","Failed to save","err")}})}isWorkDay(e){return(this.shopForm.workDays||"").includes(e)}toggleWorkDay(e){let l=(this.shopForm.workDays||"").split(",").filter(s=>s),a=l.indexOf(e);a>-1?l.splice(a,1):l.push(e),this.shopForm.workDays=l.join(",")}markRead(e){this.notifSvc.markRead(e).subscribe(()=>{this.loadNotifications(),this.notifSvc.refreshCount()})}markAllRead(){this.notifSvc.markAllRead().subscribe(()=>{this.loadNotifications(),this.notifSvc.refreshCount()})}copyLink(){navigator.clipboard.writeText(this.bookingUrl()).then(()=>this.toast.show("Link copied! \u{1F4CB}","","ok"))}statusLabel(e){return{PENDING:"\u23F3 Pending",CONFIRMED:"\u2713 Confirmed",COMPLETED:"\u{1F3C1} Done",REJECTED:"\u2715 Rejected",CANCELLED:"\u{1F6AB} Cancelled"}[e]||e}statusClass(e){return e==="PENDING"?"by":e==="CONFIRMED"?"bb":e==="COMPLETED"?"bm":"br"}notifIcon(e){return{NEW_BOOKING:"\u{1F4CB}",BOOKING_CONFIRMED:"\u2705",BOOKING_REJECTED:"\u274C",BOOKING_CANCELLED:"\u{1F6AB}",BOOKING_COMPLETED:"\u{1F3C1}"}[e]||"\u{1F514}"}timeAgo(e){let l=Math.floor((Date.now()-new Date(e).getTime())/1e3);return l<60?"just now":l<3600?`${Math.floor(l/60)}m ago`:`${Math.floor(l/3600)}h ago`}logout(){this.authSvc.logout()}static{this.\u0275fac=function(l){return new(l||o)}}static{this.\u0275cmp=U({type:o,selectors:[["app-barber"]],standalone:!0,features:[z],decls:46,vars:5,consts:[["bookingsTpl",""],["notifsTpl",""],["servicesTpl",""],["slotsTpl",""],["myshopTpl",""],["earningsTpl",""],["sharelinkTpl",""],[2,"display","flex","flex-direction","column","min-height","100vh"],[1,"topbar"],[1,"topbar-brand"],[1,"topbar-right"],[1,"notif-btn",3,"click"],[1,"notif-dot"],[1,"user-pill"],[1,"up-av"],[1,"up-name"],[1,"up-role"],[1,"btn","btn-ghost","btn-sm",3,"click"],[1,"main"],[1,"sidebar"],[1,"sb-sec"],[1,"sb-item",3,"on"],[1,"main-content"],[1,"loading-overlay"],[1,"mobile-nav"],[1,"mn-item",3,"on"],[1,"sb-item",3,"click"],[1,"sb-badge"],[1,"sb-sec",2,"margin-top","16px"],[2,"padding","10px 12px"],[2,"display","flex","align-items","center","gap","8px","margin-bottom","8px"],[1,"btn","btn-sm","btn-block",3,"click"],[1,"spinner"],[1,"page"],[1,"card","card-amber",2,"max-width","560px","margin","40px auto","text-align","center","padding","40px"],[2,"font-size","64px","margin-bottom","16px"],[2,"font-family","'Unbounded',sans-serif","font-size","28px","font-weight","900","color","var(--amber)","margin-bottom","12px"],[2,"color","var(--text2)","line-height","1.7","margin-bottom","24px"],[1,"sbox",2,"text-align","left"],[1,"srow"],[2,"color","var(--text2)"],[1,"badge","by"],[1,"btn","btn-ghost","btn-sm",2,"margin-top","16px",3,"click"],[4,"ngTemplateOutlet"],[1,"mn-item",3,"click"],[1,"mn-icon"],[1,"mn-badge"],[1,"ph"],[1,"ph-bc"],[1,"ph-bc-cur"],[1,"ph-row"],[1,"ph-title"],[1,"ph-sub"],[1,"btn","btn-ghost-amber","btn-sm",3,"click"],[2,"display","flex","gap","6px","margin-bottom","18px","flex-wrap","wrap"],[1,"btn","btn-sm",3,"btn-amber","btn-outline"],[1,"empty"],[1,"bk"],[1,"btn","btn-sm",3,"click"],[1,"ei"],[1,"et"],[1,"bk-av"],[1,"bk-body"],[1,"bk-name"],[1,"bk-detail"],[1,"bk-tags"],[1,"badge"],[1,"badge","bm"],[1,"badge","bb"],[1,"bk-amt"],[1,"bk-actions"],[1,"btn","btn-emerald","btn-sm",3,"click"],[1,"btn","btn-crimson","btn-sm",3,"click"],[1,"btn","btn-amber","btn-sm",3,"click"],[1,"btn","btn-ghost-amber","btn-sm"],[2,"display","flex","gap","14px","align-items","flex-start","padding","16px 20px","margin-bottom","8px","border-radius","14px","cursor","pointer","transition","all .2s",3,"background","border"],[2,"display","flex","gap","14px","align-items","flex-start","padding","16px 20px","margin-bottom","8px","border-radius","14px","cursor","pointer","transition","all .2s",3,"click"],[2,"width","44px","height","44px","border-radius","12px","display","flex","align-items","center","justify-content","center","font-size","22px","background","rgba(245,166,35,0.12)","flex-shrink","0"],[2,"flex","1"],[2,"display","flex","justify-content","space-between","align-items","center","gap","8px","margin-bottom","3px"],[2,"font-weight","700","font-size","14px"],[2,"width","8px","height","8px","border-radius","50%","background","var(--amber)","flex-shrink","0","display","inline-block"],[2,"font-size","13px","color","var(--text2)","line-height","1.55"],[2,"font-size","11px","color","var(--text3)","margin-top","5px"],[1,"card","card-amber",2,"margin-bottom","20px"],[1,"svc",3,"disabled"],[1,"ch"],[1,"ct"],[1,"g2"],[1,"fg"],[1,"fl"],["placeholder","e.g. Classic Haircut",1,"fi",3,"ngModelChange","ngModel"],[1,"fi",3,"ngModelChange","ngModel"],["value","hair"],["value","beard"],["value","facial"],["value","kids"],["value","combo"],["value","spa"],["value","color"],["type","number","placeholder","30",1,"fi",3,"ngModelChange","ngModel"],["type","number","placeholder","350",1,"fi",3,"ngModelChange","ngModel"],["placeholder","Short description",1,"fi",3,"ngModelChange","ngModel"],["placeholder","\u{1F487}",1,"fi",3,"ngModelChange","ngModel"],[2,"display","flex","gap","10px","margin-top","8px"],[1,"btn","btn-amber",3,"click","disabled"],[1,"btn","btn-outline",3,"click"],[1,"err-banner",2,"margin-top","10px"],[1,"svc"],[1,"svc-ico"],[1,"svc-body"],[1,"svc-name"],[1,"svc-meta"],[1,"svc-price"],[2,"display","flex","gap","6px","margin-left","12px"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"btn","btn-sm","btn-crimson",3,"click"],[1,"card",2,"margin-bottom","20px"],["type","time",1,"fi",3,"ngModelChange","ngModel"],[3,"ngValue"],[2,"display","flex","gap","8px","flex-wrap","wrap","margin-top","6px"],[1,"card"],["placeholder","\u2702\uFE0F",1,"fi",3,"ngModelChange","ngModel"],["rows","3",1,"fi",3,"ngModelChange","ngModel"],[1,"sg"],[1,"sc"],[1,"sc-accent",2,"background","linear-gradient(90deg,var(--amber),transparent)"],[1,"sc-icon"],[1,"sc-val",2,"color","var(--amber)"],[1,"sc-label"],[1,"sc-accent",2,"background","linear-gradient(90deg,var(--emerald),transparent)"],[1,"sc-val",2,"color","var(--emerald)"],[1,"sc-accent",2,"background","linear-gradient(90deg,var(--sky),transparent)"],[1,"sc-val",2,"color","var(--sky)"],[1,"sc-accent",2,"background","linear-gradient(90deg,var(--crimson),transparent)"],[1,"sc-val",2,"color","var(--crimson)"],[1,"pb-card"],[1,"pb-ico"],[2,"font-size","12px","color","var(--text2)"],[2,"display","flex","gap","3px","margin-top","4px"],[2,"font-family","'Unbounded',sans-serif","font-size","18px","color","var(--amber)"],[3,"color"],[1,"card","card-amber",2,"max-width","560px"],[2,"background","var(--card2)","border","1px solid var(--border)","border-radius","10px","padding","14px 16px","font-size","13px","font-family","monospace","word-break","break-all","margin-bottom","16px","color","var(--sky)"],[1,"btn","btn-amber","btn-block",3,"click"],[2,"margin-top","20px","padding","16px","background","var(--card2)","border-radius","12px","border","1px solid var(--border)"],[2,"font-weight","700","margin-bottom","8px"],[2,"font-size","12px","color","var(--text2)","line-height","1.7"],[1,"sbox",2,"margin-top","16px"]],template:function(l,a){if(l&1){let s=v();i(0,"div",7)(1,"header",8)(2,"div",9),n(3,"TRIMLY"),t(),i(4,"div",10)(5,"button",11),x("click",function(){return d(s),p(a.tab.set("notifications"))}),n(6," \u{1F514} "),u(7,he,1,0,"div",12),t(),i(8,"div",13)(9,"div",14),n(10),t(),i(11,"div")(12,"div",15),n(13),t(),i(14,"div",16),n(15,"Barber"),t()()(),i(16,"button",17),x("click",function(){return d(s),p(a.logout())}),n(17,"Logout"),t()()(),i(18,"div",18)(19,"aside",19)(20,"div",20),n(21,"Dashboard"),t(),w(22,Se,5,5,"button",21,I),u(24,fe,8,8),t(),i(25,"main",22),u(26,Ee,4,0,"div",23)(27,we,26,2)(28,Re,7,1),t()(),i(29,"nav",24),w(30,je,5,5,"button",25,I),t()(),u(32,Ye,20,14,"ng-template",null,0,M)(34,Xe,12,2,"ng-template",null,1,M)(36,nt,14,3,"ng-template",null,2,M)(38,rt,7,1,"ng-template",null,3,M)(40,st,7,1,"ng-template",null,4,M)(42,ut,7,1,"ng-template",null,5,M)(44,gt,7,1,"ng-template",null,6,M)}if(l&2){let s,D;r(7),g(7,a.unreadCount()>0?7:-1),r(3),_(a.initials()),r(3),_((s=a.session())==null?null:s.name),r(9),k(a.navItems),r(2),g(24,a.shop()?24:-1),r(2),g(26,a.loading()?26:((D=a.shop())==null?null:D.status)==="PENDING"?27:28),r(4),k(a.mobileNavItems)}},dependencies:[$,Y,J,le,ae,re,ee,ne,oe,te,ie],encapsulation:2})}}return o})();export{Tt as BarberComponent};
