import{b as pe}from"./chunk-UAMAJ6S4.js";import{a as _e,b as ue,c as xe,d as ge}from"./chunk-NOJ7QKFX.js";import{a as ee,b as te,c as ie,d as ne,e as oe,f as ae,g as re,h as le,i as se,j as ce,k as me}from"./chunk-BSUZVFBV.js";import{$ as c,Aa as Z,B as r,I as E,K as u,M as b,N as Q,O as V,P as U,Pa as $,Qa as de,R as x,S as L,T as k,U as B,V as i,W as t,X as D,Y as T,Z as v,_,da as F,ea as o,fa as g,ga as f,ha as O,ia as z,ja as C,ka as h,la as S,na as K,oa as j,p as N,pa as I,qa as W,r as Y,ra as M,v as d,w as p,ya as J,za as X}from"./chunk-EIAEMANE.js";var be=(a,m)=>m.tab,G=(a,m)=>m.id,fe=(a,m)=>m.val,H=()=>[];function we(a,m){if(a&1){let e=v();i(0,"app-policy-page",8),_("back",function(){d(e);let n=c();return p(n.policyType.set(null))}),t()}if(a&2){let e=c();b("type",e.policyType())}}function Ee(a,m){if(a&1&&(i(0,"span",22),o(1),t()),a&2){let e=c(3);r(),g(e.pending())}}function ke(a,m){if(a&1){let e=v();i(0,"button",17),_("click",function(){let n=d(e).$implicit,s=c(2);return p(s.tab.set(n.tab))}),i(1,"span",21),o(2),t(),o(3),u(4,Ee,2,1,"span",22),t()}if(a&2){let e=m.$implicit,l=c(2);V("on",l.tab()===e.tab),r(2),g(e.icon),r(),f(" ",e.label," "),r(),x(4,e.tab==="bookings"&&l.pending()>0?4:-1)}}function Be(a,m){if(a&1&&(i(0,"div",16)(1,"div",23),o(2),t(),i(3,"div",24),o(4),t()()),a&2){let e=c(2);r(2),g(e.shop().shopName),r(2),g(e.shop().status==="ACTIVE"?"\u{1F7E2} Active":"\u23F3 "+e.shop().status)}}function ye(a,m){a&1&&T(0)}function Te(a,m){if(a&1&&u(0,ye,1,0,"ng-container",25),a&2){c(2);let e=F(3);b("ngTemplateOutlet",e)}}function Fe(a,m){a&1&&T(0)}function Me(a,m){if(a&1&&u(0,Fe,1,0,"ng-container",25),a&2){c(2);let e=F(5);b("ngTemplateOutlet",e)}}function Ve(a,m){a&1&&T(0)}function De(a,m){if(a&1&&u(0,Ve,1,0,"ng-container",25),a&2){c(2);let e=F(7);b("ngTemplateOutlet",e)}}function Ie(a,m){a&1&&T(0)}function We(a,m){if(a&1&&u(0,Ie,1,0,"ng-container",25),a&2){c(2);let e=F(9);b("ngTemplateOutlet",e)}}function Ne(a,m){a&1&&T(0)}function Pe(a,m){if(a&1&&u(0,Ne,1,0,"ng-container",25),a&2){c(2);let e=F(11);b("ngTemplateOutlet",e)}}function Re(a,m){a&1&&T(0)}function Ae(a,m){if(a&1&&u(0,Re,1,0,"ng-container",25),a&2){c(2);let e=F(13);b("ngTemplateOutlet",e)}}function Le(a,m){a&1&&T(0)}function Oe(a,m){if(a&1&&u(0,Le,1,0,"ng-container",25),a&2){c(2);let e=F(15);b("ngTemplateOutlet",e)}}function je(a,m){if(a&1&&(i(0,"span",27),o(1),t()),a&2){let e=c(3);r(),g(e.pending())}}function ze(a,m){if(a&1){let e=v();i(0,"button",26),_("click",function(){let n=d(e).$implicit,s=c(2);return p(s.tab.set(n.tab))}),u(1,je,2,1,"span",27),i(2,"span",28),o(3),t(),o(4),t()}if(a&2){let e=m.$implicit,l=c(2);V("on",l.tab()===e.tab),r(),x(1,e.tab==="bookings"&&l.pending()>0?1:-1),r(2),g(e.icon),r(),f("",e.label," ")}}function He(a,m){if(a&1){let e=v();i(0,"div",9)(1,"app-topbar",10),_("notifClick",function(){d(e);let n=c();return p(n.tab.set("bookings"))})("settingsClick",function(){d(e);let n=c();return p(n.tab.set("shop"))}),t(),i(2,"div",11)(3,"aside",12)(4,"div",13),o(5,"Menu"),t(),k(6,ke,5,5,"button",14,be),i(8,"div",15),u(9,Be,5,2,"div",16),i(10,"button",17),_("click",function(){d(e);let n=c();return p(n.auth.logout())}),o(11,"\u{1F6AA} Logout"),t()()(),i(12,"main",18),u(13,Te,1,1,"ng-container")(14,Me,1,1,"ng-container")(15,De,1,1,"ng-container")(16,We,1,1,"ng-container")(17,Pe,1,1,"ng-container")(18,Ae,1,1,"ng-container")(19,Oe,1,1,"ng-container"),t()(),i(20,"nav",19),k(21,ze,5,5,"button",20,be),t()()}if(a&2){let e=c();r(),b("notifCount",e.pending())("showSettings",!0),r(5),B(e.nav),r(3),x(9,e.shop()?9:-1),r(4),x(13,e.tab()==="dashboard"?13:-1),r(),x(14,e.tab()==="bookings"?14:-1),r(),x(15,e.tab()==="services"?15:-1),r(),x(16,e.tab()==="slots"?16:-1),r(),x(17,e.tab()==="shop"?17:-1),r(),x(18,e.tab()==="earnings"?18:-1),r(),x(19,e.tab()==="share"?19:-1),r(2),B(e.nav.slice(0,5))}}function Ge(a,m){if(a&1){let e=v();i(0,"label",36)(1,"input",47),_("change",function(){d(e);let n=c(2);return p(n.toggleOpen())}),t(),D(2,"span",48),t()}if(a&2){let e=c(2);r(),b("checked",e.shop().open)}}function qe(a,m){a&1&&(i(0,"div",37),o(1," \u23F3 "),i(2,"b"),o(3,"Shop pending approval."),t(),o(4," Admin will review within 24 hours. You can set up services and slots in the meantime. "),t())}function Ye(a,m){if(a&1){let e=v();i(0,"div",52)(1,"div",53),o(2),t(),i(3,"div",54)(4,"div",55),o(5),t(),i(6,"div",56),o(7),t(),i(8,"div",57)(9,"button",58),_("click",function(){let n=d(e).$implicit,s=c(3);return p(s.accept(n.id))}),o(10,"\u2713 Accept"),t(),i(11,"button",59),_("click",function(){let n=d(e).$implicit,s=c(3);return p(s.reject(n.id))}),o(12,"\u2715 Reject"),t()()()()}if(a&2){let e=m.$implicit;r(2),g(e.customerName[0]),r(3),g(e.customerName),r(2),z("",e.servicesSnapshot," \xB7 ",e.slotTime," \xB7 \u20B9",e.totalAmount,"")}}function Qe(a,m){if(a&1){let e=v();i(0,"div",46)(1,"div",49)(2,"div",50),o(3,"\u23F3 Needs Action"),t(),i(4,"button",51),_("click",function(){d(e);let n=c(2);return p(n.tab.set("bookings"))}),o(5,"View all \u2192"),t()(),k(6,Ye,13,5,"div",52,G),t()}if(a&2){let e=c(2);r(6),B(e.pendingBookings().slice(0,3))}}function Ue(a,m){if(a&1&&(i(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),o(4,"Barber"),t(),i(5,"span"),o(6,"\u203A"),t(),i(7,"span",32),o(8,"Dashboard"),t()(),i(9,"div",33)(10,"div")(11,"div",34),o(12),t(),i(13,"div",35),o(14),t()(),u(15,Ge,3,1,"label",36),t()(),u(16,qe,5,0,"div",37),i(17,"div",38)(18,"div",39)(19,"div",40),o(20,"\u{1F4C5}"),t(),i(21,"div",41),o(22),t(),i(23,"div",42),o(24,"Pending Today"),t(),i(25,"div",43),o(26,"\u23F3 Action needed"),t()(),i(27,"div",39)(28,"div",40),o(29,"\u2713"),t(),i(30,"div",41),o(31),t(),i(32,"div",42),o(33,"Confirmed"),t(),i(34,"div",44),o(35,"Today"),t()(),i(36,"div",39)(37,"div",40),o(38,"\u{1F4B0}"),t(),i(39,"div",41),o(40),I(41,"number"),t(),i(42,"div",42),o(43,"My Earnings"),t(),i(44,"div",45),o(45,"This month"),t()(),i(46,"div",39)(47,"div",40),o(48,"\u2B50"),t(),i(49,"div",41),o(50),I(51,"number"),t(),i(52,"div",42),o(53,"Rating"),t(),i(54,"div",43),o(55),t()()(),u(56,Qe,8,0,"div",46),t()),a&2){let e,l,n,s,y,P,R,w=c();r(12),f("Welcome, ",((e=(e=w.auth.user())==null?null:e.fullName)!==null&&e!==void 0?e:"").split(" ")[0]||"there","! \u{1F44B}"),r(2),g(w.todayDate),r(),x(15,w.shop()?15:-1),r(),x(16,((l=w.shop())==null?null:l.status)==="PENDING"?16:-1),r(6),g(((n=w.stats())==null?null:n.pendingBookings)||0),r(9),g(((s=w.stats())==null?null:s.confirmedBookings)||0),r(9),f("\u20B9",W(41,10,(y=w.stats())==null?null:y.barberEarnings,"1.0-0"),""),r(10),g(W(51,13,((P=w.shop())==null?null:P.avgRating)||0,"1.1-1")),r(5),f("",((R=w.shop())==null?null:R.totalReviews)||0," reviews"),r(),x(56,w.pendingBookings().length>0?56:-1)}}function Ke(a,m){if(a&1){let e=v();i(0,"button",64),_("click",function(){let n=d(e).$implicit,s=c(2);return p(s.bkFilter.set(n.val))}),o(1),t()}if(a&2){let e=m.$implicit,l=c(2);V("on",l.bkFilter()===e.val),r(),f(" ",e.label," ")}}function Je(a,m){if(a&1){let e=v();i(0,"button",58),_("click",function(){d(e);let n=c().$implicit,s=c(2);return p(s.accept(n.id))}),o(1,"\u2713 Accept"),t(),i(2,"button",59),_("click",function(){d(e);let n=c().$implicit,s=c(2);return p(s.reject(n.id))}),o(3,"\u2715 Reject"),t()}}function Xe(a,m){if(a&1){let e=v();i(0,"button",51),_("click",function(){d(e);let n=c().$implicit,s=c(2);return p(s.complete(n.id))}),o(1,"\u{1F3C1} Complete"),t(),i(2,"button",68),_("click",function(){d(e);let n=c().$implicit,s=c(2);return p(s.openReschedule(n))}),o(3,"\u{1F504} Reschedule"),t(),i(4,"button",59),_("click",function(){d(e);let n=c().$implicit,s=c(2);return p(s.cancelBk(n.id))}),o(5,"Cancel"),t()}}function Ze(a,m){if(a&1&&(i(0,"div",52)(1,"div",53),o(2),t(),i(3,"div",54)(4,"div",65)(5,"div",55),o(6),t(),D(7,"app-badge",66),t(),i(8,"div",56),o(9),t(),i(10,"div",56),o(11),t(),i(12,"div",56),o(13),t(),i(14,"div",67),o(15),t(),i(16,"div",57),u(17,Je,4,0)(18,Xe,6,0),t()()()),a&2){let e=m.$implicit;r(2),g(e.customerName[0]),r(4),g(e.customerName),r(),b("status",e.status),r(2),g(e.servicesSnapshot),r(2),z("\u{1F4C5} ",e.bookingDate," \xB7 \u23F0 ",e.slotTime," \xB7 \u23F1 ",e.durationMinutes,"min"),r(2),f("\u{1F4DE} ",e.customerPhone,""),r(2),f("\u20B9",e.totalAmount,""),r(2),x(17,e.status==="PENDING"?17:-1),r(),x(18,e.status==="CONFIRMED"?18:-1)}}function $e(a,m){a&1&&(i(0,"div",62)(1,"div",69),o(2,"\u{1F4C5}"),t(),i(3,"div",70),o(4,"No bookings here"),t()())}function et(a,m){if(a&1){let e=v();i(0,"div",71),_("click",function(){d(e);let n=c(2);return p(n.rescheduleTarget.set(null))}),i(1,"div",72),_("click",function(n){return d(e),p(n.stopPropagation())}),i(2,"div",73)(3,"div",74),o(4,"\u{1F504} Propose Reschedule"),t(),i(5,"button",75),_("click",function(){d(e);let n=c(2);return p(n.rescheduleTarget.set(null))}),o(6,"\xD7"),t()(),i(7,"div",76)(8,"div",77),o(9),t(),i(10,"div",78)(11,"label",79),o(12,"New Date"),t(),i(13,"input",80),S("ngModelChange",function(n){d(e);let s=c(2);return h(s.rsDate,n)||(s.rsDate=n),p(n)}),t()(),i(14,"div",78)(15,"label",79),o(16,"New Time"),t(),i(17,"input",81),S("ngModelChange",function(n){d(e);let s=c(2);return h(s.rsTime,n)||(s.rsTime=n),p(n)}),t()(),i(18,"div",78)(19,"label",79),o(20,"Reason"),t(),i(21,"textarea",82),S("ngModelChange",function(n){d(e);let s=c(2);return h(s.rsReason,n)||(s.rsReason=n),p(n)}),t()()(),i(22,"div",83)(23,"button",84),_("click",function(){d(e);let n=c(2);return p(n.rescheduleTarget.set(null))}),o(24,"Cancel"),t(),i(25,"button",85),_("click",function(){d(e);let n=c(2);return p(n.submitReschedule())}),o(26,"Send Request"),t()()()()}if(a&2){let e=c(2);r(9),f("Booking: ",e.rescheduleTarget().servicesSnapshot,""),r(4),C("ngModel",e.rsDate),r(4),C("ngModel",e.rsTime),r(4),C("ngModel",e.rsReason),r(4),b("disabled",!e.rsDate||!e.rsTime||!e.rsReason)}}function tt(a,m){if(a&1&&(i(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),o(4,"Barber"),t(),o(5,"\u203A"),i(6,"span",32),o(7,"Bookings"),t()(),i(8,"div",33)(9,"div")(10,"div",34),o(11,"Bookings"),t(),i(12,"div",35),o(13,"Manage all appointments"),t()()()(),i(14,"div",60),k(15,Ke,2,3,"button",61,fe),t(),k(17,Ze,19,11,"div",52,G),u(19,$e,5,0,"div",62),t(),u(20,et,27,5,"div",63)),a&2){let e=c();r(15),B(e.bkFilters),r(2),B(e.filteredBookings()),r(2),x(19,e.filteredBookings().length===0?19:-1),r(),x(20,e.rescheduleTarget()?20:-1)}}function it(a,m){if(a&1){let e=v();i(0,"div",88)(1,"div",89),o(2),t(),i(3,"div",90)(4,"div",91),o(5),t(),i(6,"div",92),o(7),t()(),i(8,"div",93),o(9),t(),i(10,"div",94)(11,"button",95),_("click",function(){let n=d(e).$implicit,s=c(2);return p(s.openServiceModal(n))}),o(12,"\u270F\uFE0F"),t(),i(13,"button",96),_("click",function(){let n=d(e).$implicit,s=c(2);return p(s.toggleSvc(n))}),o(14),t()()()}if(a&2){let e=m.$implicit;V("disabled",!e.enabled),r(2),g(e.icon||"\u2702\uFE0F"),r(3),g(e.serviceName),r(2),O("",e.category," \xB7 ",e.durationMinutes,"min"),r(2),f("\u20B9",e.price,""),r(4),U(e.enabled?"btn-crimson":"btn-emerald"),r(),f(" ",e.enabled?"Disable":"Enable"," ")}}function nt(a,m){a&1&&(i(0,"div",62)(1,"div",69),o(2,"\u2702\uFE0F"),t(),i(3,"div",70),o(4,"No services yet. Add your first service."),t()())}function ot(a,m){if(a&1&&(i(0,"option",103),o(1),t()),a&2){let e=m.$implicit;b("value",e),r(),g(e)}}function at(a,m){if(a&1){let e=v();i(0,"div",71),_("click",function(){d(e);let n=c(2);return p(n.svcModal.set(!1))}),i(1,"div",72),_("click",function(n){return d(e),p(n.stopPropagation())}),i(2,"div",73)(3,"div",74),o(4),t(),i(5,"button",75),_("click",function(){d(e);let n=c(2);return p(n.svcModal.set(!1))}),o(6,"\xD7"),t()(),i(7,"div",76)(8,"div",97)(9,"div",78)(10,"label",79),o(11,"Service Name"),t(),i(12,"input",98),S("ngModelChange",function(n){d(e);let s=c(2);return h(s.svcForm.serviceName,n)||(s.svcForm.serviceName=n),p(n)}),t()(),i(13,"div",78)(14,"label",79),o(15,"Icon (emoji)"),t(),i(16,"input",99),S("ngModelChange",function(n){d(e);let s=c(2);return h(s.svcForm.icon,n)||(s.svcForm.icon=n),p(n)}),t()()(),i(17,"div",78)(18,"label",79),o(19,"Description"),t(),i(20,"input",100),S("ngModelChange",function(n){d(e);let s=c(2);return h(s.svcForm.description,n)||(s.svcForm.description=n),p(n)}),t()(),i(21,"div",97)(22,"div",78)(23,"label",79),o(24,"Price (\u20B9)"),t(),i(25,"input",101),S("ngModelChange",function(n){d(e);let s=c(2);return h(s.svcForm.price,n)||(s.svcForm.price=n),p(n)}),t()(),i(26,"div",78)(27,"label",79),o(28,"Duration (min)"),t(),i(29,"input",101),S("ngModelChange",function(n){d(e);let s=c(2);return h(s.svcForm.durationMinutes,n)||(s.svcForm.durationMinutes=n),p(n)}),t()()(),i(30,"div",78)(31,"label",79),o(32,"Category"),t(),i(33,"select",102),S("ngModelChange",function(n){d(e);let s=c(2);return h(s.svcForm.category,n)||(s.svcForm.category=n),p(n)}),k(34,ot,2,2,"option",103,L),t()()(),i(36,"div",83)(37,"button",84),_("click",function(){d(e);let n=c(2);return p(n.svcModal.set(!1))}),o(38,"Cancel"),t(),i(39,"button",85),_("click",function(){d(e);let n=c(2);return p(n.saveService())}),o(40),t()()()()}if(a&2){let e=c(2);r(4),g(e.editSvc()?"Edit Service":"Add Service"),r(8),C("ngModel",e.svcForm.serviceName),r(4),C("ngModel",e.svcForm.icon),r(4),C("ngModel",e.svcForm.description),r(5),C("ngModel",e.svcForm.price),r(4),C("ngModel",e.svcForm.durationMinutes),r(4),C("ngModel",e.svcForm.category),r(),B(e.categories),r(5),b("disabled",!e.svcForm.serviceName||!e.svcForm.price),r(),f(" ",e.editSvc()?"Update":"Add"," Service ")}}function rt(a,m){if(a&1){let e=v();i(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),o(4,"Barber"),t(),o(5,"\u203A"),i(6,"span",32),o(7,"Services"),t()(),i(8,"div",33)(9,"div")(10,"div",34),o(11,"Services"),t(),i(12,"div",35),o(13),t()(),i(14,"button",86),_("click",function(){d(e);let n=c();return p(n.openServiceModal())}),o(15,"+ Add Service"),t()()(),k(16,it,15,10,"div",87,G),u(18,nt,5,0,"div",62),t(),u(19,at,41,9,"div",63)}if(a&2){let e,l,n,s=c();r(13),f("",(((e=s.shop())==null?null:e.services)||j(3,H)).length," services"),r(3),B(((l=s.shop())==null?null:l.services)||j(4,H)),r(2),x(18,(((n=s.shop())==null?null:n.services)||j(5,H)).length===0?18:-1),r(),x(19,s.svcModal()?19:-1)}}function lt(a,m){if(a&1){let e=v();i(0,"button",64),_("click",function(){let n=d(e).$implicit,s=c(2);return p(s.toggleDay(n))}),o(1),t()}if(a&2){let e=m.$implicit,l=c(2);V("on",l.isWorkDay(e)),r(),g(e)}}function st(a,m){if(a&1){let e=v();i(0,"button",113),_("click",function(){let n=d(e).$implicit,s=c(3);return p(s.toggleSlotBlock(n))}),o(1),t()}if(a&2){let e=m.$implicit,l=c(3);Q("background",l.blockedSlots().has(e)?"var(--crimson-dim)":"var(--card2)")("border","1px solid "+(l.blockedSlots().has(e)?"var(--crimson)":"var(--border)"))("color",l.blockedSlots().has(e)?"var(--crimson)":"var(--text2)"),r(),O(" ",l.blockedSlots().has(e)?"\u{1F6AB}":"\u2705"," ",e," ")}}function ct(a,m){if(a&1&&(i(0,"div",112),o(1),t()),a&2){let e=c(3);r(),O(" ",e.blockedSlots().size," slot(s) blocked for ",e.selectedDate()," ")}}function mt(a,m){if(a&1){let e=v();i(0,"div",107)(1,"div",49)(2,"div",50),o(3,"Time Slots Preview"),t(),i(4,"input",108),_("change",function(n){d(e);let s=c(2);return s.selectedDate.set(n.target.value),p(s.loadBlockedSlots())}),t()(),i(5,"div",109),o(6),t(),i(7,"div",110),k(8,st,2,8,"button",111,L),t(),u(10,ct,2,2,"div",112),t()}if(a&2){let e=c(2);r(4),b("value",e.selectedDate()),r(2),f(" ",e.generatedSlots().length," slots \xB7 tap to block/unblock "),r(2),B(e.generatedSlots()),r(2),x(10,e.blockedSlots().size>0?10:-1)}}function dt(a,m){if(a&1){let e=v();i(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),o(4,"Barber"),t(),o(5,"\u203A"),i(6,"span",32),o(7,"Schedule"),t()(),i(8,"div",33)(9,"div")(10,"div",34),o(11,"Schedule & Hours"),t()()()(),i(12,"div",46)(13,"div",49)(14,"div",50),o(15,"Working Hours"),t()(),i(16,"div",97)(17,"div",78)(18,"label",79),o(19,"Open Time"),t(),i(20,"input",81),S("ngModelChange",function(n){d(e);let s=c();return h(s.shopForm.openTime,n)||(s.shopForm.openTime=n),p(n)}),t()(),i(21,"div",78)(22,"label",79),o(23,"Close Time"),t(),i(24,"input",81),S("ngModelChange",function(n){d(e);let s=c();return h(s.shopForm.closeTime,n)||(s.shopForm.closeTime=n),p(n)}),t()()(),i(25,"div",97)(26,"div",78)(27,"label",79),o(28,"Slot Duration (min)"),t(),i(29,"select",102),S("ngModelChange",function(n){d(e);let s=c();return h(s.shopForm.slotDurationMinutes,n)||(s.shopForm.slotDurationMinutes=n),p(n)}),i(30,"option",103),o(31,"15 min"),t(),i(32,"option",103),o(33,"20 min"),t(),i(34,"option",103),o(35,"30 min"),t(),i(36,"option",103),o(37,"45 min"),t(),i(38,"option",103),o(39,"60 min"),t()()(),i(40,"div",78)(41,"label",79),o(42,"Seats / Chairs"),t(),i(43,"input",104),S("ngModelChange",function(n){d(e);let s=c();return h(s.shopForm.seats,n)||(s.shopForm.seats=n),p(n)}),t()()(),i(44,"div",78)(45,"label",79),o(46,"Working Days"),t(),i(47,"div",105),k(48,lt,2,3,"button",61,L),t()(),i(50,"button",106),_("click",function(){d(e);let n=c();return p(n.saveSchedule())}),o(51,"Save Schedule"),t()(),u(52,mt,11,3,"div",107),t()}if(a&2){let e=c();r(20),C("ngModel",e.shopForm.openTime),r(4),C("ngModel",e.shopForm.closeTime),r(5),C("ngModel",e.shopForm.slotDurationMinutes),r(),b("value",15),r(2),b("value",20),r(2),b("value",30),r(2),b("value",45),r(2),b("value",60),r(5),C("ngModel",e.shopForm.seats),r(5),B(e.days),r(4),x(52,e.generatedSlots().length>0?52:-1)}}function pt(a,m){if(a&1&&(i(0,"div",116)(1,"div",49)(2,"div",50),o(3,"Shop Status"),t()(),i(4,"div",117),D(5,"app-badge",66),i(6,"span",118),o(7),t()()()),a&2){let e=c(2);r(5),b("status",e.shop().status),r(2),g(e.shop().status==="PENDING"?"Awaiting admin approval":e.shop().status==="ACTIVE"?"Your shop is live":"Contact support")}}function _t(a,m){if(a&1){let e=v();i(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),o(4,"Barber"),t(),o(5,"\u203A"),i(6,"span",32),o(7,"My Shop"),t()(),i(8,"div",33)(9,"div")(10,"div",34),o(11,"Shop Settings"),t()()()(),i(12,"div",46)(13,"div",49)(14,"div",50),o(15,"Shop Info"),t()(),i(16,"div",78)(17,"label",79),o(18,"Shop Name"),t(),i(19,"input",102),S("ngModelChange",function(n){d(e);let s=c();return h(s.shopForm.shopName,n)||(s.shopForm.shopName=n),p(n)}),t()(),i(20,"div",78)(21,"label",79),o(22,"Bio"),t(),i(23,"textarea",114),S("ngModelChange",function(n){d(e);let s=c();return h(s.shopForm.bio,n)||(s.shopForm.bio=n),p(n)}),t()(),i(24,"div",97)(25,"div",78)(26,"label",79),o(27,"Phone"),t(),i(28,"input",115),S("ngModelChange",function(n){d(e);let s=c();return h(s.shopForm.phone,n)||(s.shopForm.phone=n),p(n)}),t()(),i(29,"div",78)(30,"label",79),o(31,"Emoji"),t(),i(32,"input",99),S("ngModelChange",function(n){d(e);let s=c();return h(s.shopForm.emoji,n)||(s.shopForm.emoji=n),p(n)}),t()()(),i(33,"div",78)(34,"label",79),o(35,"Location"),t(),i(36,"input",102),S("ngModelChange",function(n){d(e);let s=c();return h(s.shopForm.location,n)||(s.shopForm.location=n),p(n)}),t()(),i(37,"div",97)(38,"div",78)(39,"label",79),o(40,"City"),t(),i(41,"input",102),S("ngModelChange",function(n){d(e);let s=c();return h(s.shopForm.city,n)||(s.shopForm.city=n),p(n)}),t()(),i(42,"div",78)(43,"label",79),o(44,"Area"),t(),i(45,"input",102),S("ngModelChange",function(n){d(e);let s=c();return h(s.shopForm.area,n)||(s.shopForm.area=n),p(n)}),t()()(),i(46,"button",106),_("click",function(){d(e);let n=c();return p(n.saveShop())}),o(47,"Save Changes"),t()(),u(48,pt,8,2,"div",116),t()}if(a&2){let e=c();r(19),C("ngModel",e.shopForm.shopName),r(4),C("ngModel",e.shopForm.bio),r(5),C("ngModel",e.shopForm.phone),r(4),C("ngModel",e.shopForm.emoji),r(4),C("ngModel",e.shopForm.location),r(5),C("ngModel",e.shopForm.city),r(4),C("ngModel",e.shopForm.area),r(3),x(48,e.shop()?48:-1)}}function ut(a,m){if(a&1&&(i(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),o(4,"Barber"),t(),o(5,"\u203A"),i(6,"span",32),o(7,"Earnings"),t()(),i(8,"div",33)(9,"div")(10,"div",34),o(11,"Revenue & Earnings \u{1F4B0}"),t()()()(),i(12,"div",38)(13,"div",39)(14,"div",40),o(15,"\u{1F4B0}"),t(),i(16,"div",41),o(17),I(18,"number"),t(),i(19,"div",42),o(20,"My Earnings"),t(),i(21,"div",45),o(22,"This month"),t()(),i(23,"div",39)(24,"div",40),o(25,"\u{1F4CA}"),t(),i(26,"div",41),o(27),I(28,"number"),t(),i(29,"div",42),o(30,"Gross Revenue"),t()(),i(31,"div",39)(32,"div",40),o(33,"\u{1F3E2}"),t(),i(34,"div",41),o(35),I(36,"number"),t(),i(37,"div",42),o(38,"Platform Fee (10%)"),t()(),i(39,"div",39)(40,"div",40),o(41,"\u{1F3C1}"),t(),i(42,"div",41),o(43),t(),i(44,"div",42),o(45,"Completed"),t()()(),i(46,"div",119)(47,"div",49)(48,"div",50),o(49,"Commission Breakdown"),t()(),i(50,"div",120),o(51," Trimly charges "),i(52,"b",121),o(53,"10% commission"),t(),o(54," on completed bookings only."),D(55,"br"),o(56," Cancelled or rejected bookings \u2192 "),i(57,"b"),o(58,"zero commission"),t(),o(59,"."),D(60,"br"),o(61," Earnings = 90% of completed booking total. "),t()()()),a&2){let e,l,n,s,y=c();r(17),f("\u20B9",W(18,4,(e=y.stats())==null?null:e.barberEarnings,"1.0-0"),""),r(10),f("\u20B9",W(28,7,(l=y.stats())==null?null:l.totalRevenue,"1.0-0"),""),r(8),f("\u20B9",W(36,10,(n=y.stats())==null?null:n.totalCommission,"1.0-0"),""),r(8),g(((s=y.stats())==null?null:s.completedBookings)||0)}}function xt(a,m){if(a&1){let e=v();i(0,"div",122)(1,"div",123),o(2),t(),i(3,"div",124),o(4),t(),i(5,"div",125),o(6),t(),i(7,"div",126)(8,"div",127),o(9,"Direct Booking Link"),t(),i(10,"div",128),o(11),t()(),i(12,"button",106),_("click",function(){d(e);let n=c(2);return p(n.copyLink())}),o(13,"\u{1F4CB} Copy Link"),t()()}if(a&2){let e=c(2);r(2),g(e.shop().emoji||"\u2702\uFE0F"),r(2),g(e.shop().shopName),r(2),f("\u{1F4CD} ",e.shop().location,""),r(5),f(" trimly.app/",e.shop().slug," ")}}function gt(a,m){if(a&1&&(i(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),o(4,"Barber"),t(),o(5,"\u203A"),i(6,"span",32),o(7,"Share & QR"),t()(),i(8,"div",33)(9,"div")(10,"div",34),o(11,"Share Your Shop"),t()()()(),u(12,xt,14,4,"div",122),t()),a&2){let e=c();r(12),x(12,e.shop()?12:-1)}}var It=(()=>{class a{constructor(){this.auth=N($),this.shopSvc=N(xe),this.bookSvc=N(_e),this.toast=N(de),this.tab=E("dashboard"),this.shop=E(null),this.blockedSlots=E(new Set),this.selectedDate=E(new Date().toISOString().split("T")[0]),this.bookings=E([]),this.stats=E(null),this.bkFilter=E(""),this.rescheduleTarget=E(null),this.svcModal=E(!1),this.editSvc=E(null),this.policyType=E(null),this.rsDate="",this.rsTime="",this.rsReason="",this.svcForm={serviceName:"",category:"HAIR",price:0,durationMinutes:30},this.shopForm={},this.categories=["HAIR","BEARD","FACIAL","SPA","COLOR","KIDS","COMBO","OTHER"],this.days=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],this.bkFilters=[{val:"",label:"All"},{val:"pending",label:"\u23F3 Pending"},{val:"confirmed",label:"\u2713 Confirmed"},{val:"completed",label:"\u{1F3C1} Done"},{val:"cancelled",label:"Cancelled"}],this.nav=[{tab:"dashboard",icon:"\u{1F4CA}",label:"Dashboard"},{tab:"bookings",icon:"\u{1F4C5}",label:"Bookings"},{tab:"services",icon:"\u2702\uFE0F",label:"Services"},{tab:"slots",icon:"\u{1F550}",label:"Schedule"},{tab:"shop",icon:"\u{1F3EA}",label:"My Shop"},{tab:"earnings",icon:"\u{1F4B0}",label:"Earnings"},{tab:"share",icon:"\u{1F4E4}",label:"Share & QR"}]}generatedSlots(){let e=this.shopForm.openTime,l=this.shopForm.closeTime,n=this.shopForm.slotDurationMinutes;if(!e||!l||!n)return[];let s=[],[y,P]=e.split(":").map(Number),[R,w]=l.split(":").map(Number),A=y*60+P,ve=R*60+w;for(;A+n<=ve;){let q=Math.floor(A/60),Ce=A%60,he=q>=12?"PM":"AM",Se=q%12||12;s.push(`${Se}:${String(Ce).padStart(2,"0")} ${he}`),A+=n}return s}get todayDate(){return new Date().toLocaleDateString("en-IN",{weekday:"long",day:"numeric",month:"long"})}pending(){return this.bookings().filter(e=>e.status==="PENDING").length}pendingBookings(){return this.bookings().filter(e=>e.status==="PENDING")}filteredBookings(){return this.bkFilter()?this.bookings().filter(e=>e.status===this.bkFilter()):this.bookings()}ngOnInit(){this.loadShop(),this.loadBlockedSlots(),this.loadBookings(),this.loadStats()}loadShop(){this.shopSvc.getMyShop().subscribe({next:e=>{let l=e.data;l&&(this.shop.set(l),this.shopForm={shopName:l.shopName,bio:l.bio||"",phone:l.phone||"",emoji:l.emoji||"\u2702\uFE0F",location:l.location,city:l.city||"",area:l.area||"",openTime:l.openTime||"09:00",closeTime:l.closeTime||"20:00",slotDurationMinutes:l.slotDurationMinutes||30,seats:l.seats,workDays:l.workDays||"Mon,Tue,Wed,Thu,Fri,Sat"})}})}loadBookings(){this.bookSvc.getBarberBookings().subscribe({next:e=>this.bookings.set(e.data||[])})}loadStats(){this.bookSvc.getBarberStats().subscribe({next:e=>this.stats.set(e.data)})}accept(e){this.bookSvc.acceptBooking(e).subscribe({next:()=>{this.toast.ok("Booking accepted \u2705"),this.loadBookings()}})}reject(e){this.bookSvc.rejectBooking(e).subscribe({next:()=>{this.toast.warn("Booking rejected"),this.loadBookings()}})}complete(e){this.bookSvc.completeBooking(e).subscribe({next:()=>{this.toast.ok("Marked as completed \u{1F3C1}"),this.loadBookings(),this.loadStats()}})}cancelBk(e){this.bookSvc.cancelBooking(e).subscribe({next:()=>{this.toast.warn("Booking cancelled"),this.loadBookings()}})}openReschedule(e){this.rescheduleTarget.set(e),this.rsDate="",this.rsTime="",this.rsReason=""}submitReschedule(){!this.rescheduleTarget()||!this.rsDate||!this.rsTime||!this.rsReason||this.bookSvc.requestReschedule(this.rescheduleTarget().id,{newDate:this.rsDate,newTime:this.rsTime,reason:this.rsReason}).subscribe({next:()=>{this.toast.wa("Reschedule request sent to customer \u{1F4AC}"),this.rescheduleTarget.set(null),this.loadBookings()}})}toggleOpen(){let e=this.shop();if(!e)return;let l=!e.open;this.shopSvc.updateMyShop({isOpen:l}).subscribe({next:n=>{n.data&&(this.shop.set(n.data),this.toast.ok(n.data.open?"Shop is now Open \u{1F7E2}":"Shop is now Closed \u{1F534}"))}})}loadBlockedSlots(){this.shopSvc.getBlockedSlots(this.selectedDate()).subscribe({next:e=>this.blockedSlots.set(new Set(e.data||[]))})}toggleSlotBlock(e){let l=this.selectedDate();this.blockedSlots().has(e)?this.shopSvc.unblockSlot(l,e).subscribe({next:()=>{let n=new Set(this.blockedSlots());n.delete(e),this.blockedSlots.set(n)}}):this.shopSvc.blockSlot(l,e).subscribe({next:()=>{let n=new Set(this.blockedSlots());n.add(e),this.blockedSlots.set(n)}})}openServiceModal(e){this.editSvc.set(e||null),e?this.svcForm={serviceName:e.serviceName,description:e.description,category:e.category,price:e.price,durationMinutes:e.durationMinutes,icon:e.icon}:this.svcForm={serviceName:"",category:"HAIR",price:0,durationMinutes:30},this.svcModal.set(!0)}saveService(){let e=this.editSvc();(e?this.shopSvc.updateService(e.id,this.svcForm):this.shopSvc.addService(this.svcForm)).subscribe({next:()=>{this.svcModal.set(!1),this.toast.ok(e?"Service updated":"Service added \u2713"),this.loadShop()}})}toggleSvc(e){this.shopSvc.toggleService(e.id).subscribe({next:()=>{this.loadShop(),this.toast.ok(e.enabled?"Service disabled":"Service enabled")}})}saveShop(){this.shopSvc.updateMyShop(this.shopForm).subscribe({next:e=>{this.shop.set(e.data),this.toast.ok("Shop updated \u2713")}})}saveSchedule(){this.shopSvc.updateMyShop({openTime:this.shopForm.openTime,closeTime:this.shopForm.closeTime,slotDurationMinutes:this.shopForm.slotDurationMinutes,seats:this.shopForm.seats,workDays:this.shopForm.workDays}).subscribe({next:e=>{this.shop.set(e.data),this.toast.ok("Schedule saved \u2713")}})}isWorkDay(e){return(this.shopForm.workDays||"").includes(e)}toggleDay(e){let l=(this.shopForm.workDays||"").split(",").filter(Boolean),n=l.indexOf(e);n>=0?l.splice(n,1):l.push(e),this.shopForm.workDays=l.join(",")}copyLink(){navigator.clipboard?.writeText(`https://trimly.app/${this.shop()?.slug}`).then(()=>this.toast.ok("Link copied!"))}static{this.\u0275fac=function(l){return new(l||a)}}static{this.\u0275cmp=Y({type:a,selectors:[["app-barber"]],standalone:!0,features:[K],decls:16,vars:1,consts:[["dashboardTpl",""],["bookingsTpl",""],["servicesTpl",""],["slotsTpl",""],["shopTpl",""],["earningsTpl",""],["shareTpl",""],[3,"type"],[3,"back","type"],[2,"display","flex","flex-direction","column","min-height","100vh"],[3,"notifClick","settingsClick","notifCount","showSettings"],[1,"shell",2,"flex","1"],[1,"sidebar"],[1,"sb-sec"],[1,"sb-item",3,"on"],[1,"sb-footer"],[2,"font-size","11px","color","var(--text3)","padding","6px 12px","margin-bottom","6px"],[1,"sb-item",3,"click"],[1,"main"],[1,"mobile-nav"],[1,"mni",3,"on"],[1,"sb-icon"],[1,"sb-badge"],[2,"font-weight","700","color","var(--text2)"],[2,"margin-top","2px"],[4,"ngTemplateOutlet"],[1,"mni",3,"click"],[1,"mni-badge"],[1,"mni-icon"],[1,"page","anim-fade-up"],[1,"ph"],[1,"ph-bc"],[1,"ph-bc-cur"],[1,"ph-row"],[1,"ph-title"],[1,"ph-sub"],["title","Open/Close shop",1,"toggle"],[2,"margin-bottom","16px","padding","14px 18px","background","var(--amber-dim)","border","1px solid rgba(245,166,35,0.25)","border-radius","12px"],[1,"sg"],[1,"sc"],[1,"sc-icon"],[1,"sc-val"],[1,"sc-label"],[1,"sc-chip","chip-y"],[1,"sc-chip","chip-b"],[1,"sc-chip","chip-g"],[1,"card"],["type","checkbox",3,"change","checked"],[1,"ttrack"],[1,"ch"],[1,"ct"],[1,"btn","btn-ghost-amber","btn-sm",3,"click"],[1,"bk"],[1,"bk-av"],[1,"bk-body"],[1,"bk-name"],[1,"bk-detail"],[1,"bk-actions"],[1,"btn","btn-emerald","btn-sm",3,"click"],[1,"btn","btn-crimson","btn-sm",3,"click"],[2,"display","flex","gap","6px","margin-bottom","16px","flex-wrap","wrap"],[1,"area-pill",3,"on"],[1,"empty"],[1,"mo"],[1,"area-pill",3,"click"],[2,"display","flex","justify-content","space-between","align-items","flex-start"],[3,"status"],[1,"bk-amt"],[1,"btn","btn-violet","btn-sm",3,"click"],[1,"ei"],[1,"et"],[1,"mo",3,"click"],[1,"mb",3,"click"],[1,"mh"],[1,"mt"],[1,"mx",3,"click"],[1,"mbody"],[2,"margin-bottom","12px","font-size","13px","color","var(--text2)"],[1,"fg"],[1,"fl"],["type","date",1,"fi",3,"ngModelChange","ngModel"],["type","time",1,"fi",3,"ngModelChange","ngModel"],["rows","2","placeholder","e.g. Equipment maintenance...",1,"fi",3,"ngModelChange","ngModel"],[1,"mfoot"],[1,"btn","btn-outline","btn-sm",3,"click"],[1,"btn","btn-amber","btn-sm",3,"click","disabled"],[1,"btn","btn-amber","btn-sm",3,"click"],[1,"svc",3,"disabled"],[1,"svc"],[1,"svc-ico"],[1,"svc-info"],[1,"svc-name"],[1,"svc-meta"],[1,"svc-price"],[2,"display","flex","flex-direction","column","gap","4px","align-items","flex-end"],[1,"btn","btn-ghost","btn-sm",3,"click"],[1,"btn","btn-sm",3,"click"],[1,"g2"],["placeholder","Classic Haircut",1,"fi",3,"ngModelChange","ngModel"],["placeholder","\u2702\uFE0F","maxlength","4",1,"fi",3,"ngModelChange","ngModel"],["placeholder","Brief description...",1,"fi",3,"ngModelChange","ngModel"],["type","number",1,"fi",3,"ngModelChange","ngModel"],[1,"fi",3,"ngModelChange","ngModel"],[3,"value"],["type","number","min","1","max","10",1,"fi",3,"ngModelChange","ngModel"],[2,"display","flex","gap","6px","flex-wrap","wrap","margin-top","6px"],[1,"btn","btn-amber",3,"click"],[1,"card",2,"margin-top","16px"],["type","date",1,"fi",2,"width","auto","padding","4px 10px","font-size","12px",3,"change","value"],[2,"font-size","12px","color","var(--text3)","margin-bottom","10px"],[2,"display","flex","flex-wrap","wrap","gap","8px"],[2,"padding","6px 12px","border-radius","20px","font-size","12px","cursor","pointer","font-family","'DM Sans',sans-serif","transition","all .15s",3,"background","border","color"],[2,"margin-top","12px","font-size","12px","color","var(--text3)"],[2,"padding","6px 12px","border-radius","20px","font-size","12px","cursor","pointer","font-family","'DM Sans',sans-serif","transition","all .15s",3,"click"],["rows","3","placeholder","Tell customers about your shop...",1,"fi",3,"ngModelChange","ngModel"],["placeholder","+91 98765 43210",1,"fi",3,"ngModelChange","ngModel"],[1,"card",2,"margin-top","14px"],[2,"display","flex","align-items","center","gap","12px"],[2,"font-size","13px","color","var(--text2)"],[1,"card","card-amber"],[2,"font-size","13px","color","var(--text2)","line-height","1.8"],[2,"color","var(--amber)"],[1,"card",2,"text-align","center"],[2,"font-size","48px","margin-bottom","12px"],[2,"font-family","'Unbounded',sans-serif","font-size","20px","font-weight","700","margin-bottom","8px"],[2,"color","var(--text2)","font-size","13px","margin-bottom","20px"],[2,"background","var(--card2)","border-radius","12px","padding","14px","margin-bottom","16px"],[2,"font-size","11px","color","var(--text3)","margin-bottom","6px"],[2,"font-size","13px","color","var(--amber)","font-weight","600","word-break","break-all"]],template:function(l,n){l&1&&u(0,we,1,1,"app-policy-page",7)(1,He,23,10)(2,Ue,57,16,"ng-template",null,0,M)(4,tt,21,2,"ng-template",null,1,M)(6,rt,20,6,"ng-template",null,2,M)(8,dt,53,10,"ng-template",null,3,M)(10,_t,49,8,"ng-template",null,4,M)(12,ut,62,13,"ng-template",null,5,M)(14,gt,13,1,"ng-template",null,6,M),l&2&&x(0,n.policyType()?0:1)},dependencies:[Z,J,X,me,ae,re,ee,ne,oe,te,ce,se,le,ie,ue,ge,pe],encapsulation:2})}}return a})();export{It as BarberComponent};
